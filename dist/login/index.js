(()=>{"use strict";var e=/^(?:submit|button|image|reset|file)$/i,t=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function o(e,t,n){if(0===t.length)return n;var a=t.shift(),s=a.match(/^\[(.+?)\]$/);if("[]"===a)return e=e||[],Array.isArray(e)?e.push(o(null,t,n)):(e._values=e._values||[],e._values.push(o(null,t,n))),e;if(s){var r=s[1],l=+r;isNaN(l)?(e=e||{})[r]=o(e[r],t,n):(e=e||[])[l]=o(e[l],t,n)}else e[a]=o(e[a],t,n);return e}function a(e,t,a){if(t.match(n))o(e,function(e){var t=[],o=new RegExp(n),a=/^([^\[\]]*)/.exec(e);for(a[1]&&t.push(a[1]);null!==(a=o.exec(e));)t.push(a[1]);return t}(t),a);else{var s=e[t];s?(Array.isArray(s)||(e[t]=[s]),e[t].push(a)):e[t]=a}return e}function s(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}axios.defaults.baseURL="https://geek.itheima.net/",axios.interceptors.request.use((function(e){const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(function(e){return Promise.reject(e)})),axios.interceptors.response.use((function(e){return e.data}),(function(e){return 401==e?.response?.status&&(alert("Login expired,Please login again!"),localStorage.clear(),location.href="../login/index.html"),Promise.reject(e)}));const r=axios,l=function(e,t){let n=document.querySelector(".alert");n.classList.remove("d-none"),n.innerText=e,n.classList.add("show"),n.classList.add(t?"alert-success":"alert-danger"),setTimeout((()=>{n.classList.add("d-none"),n.innerText="",n.classList.remove("show"),n.classList.remove(t?"alert-success":"alert-danger")}),1e3)};document.querySelector(".btn").addEventListener("click",(()=>{console.log("Log: login clicked!");const n=function(n,o){"object"!=typeof o?o={hash:!!o}:void 0===o.hash&&(o.hash=!0);for(var r=o.hash?{}:"",l=o.serializer||(o.hash?a:s),i=n&&n.elements?n.elements:[],c=Object.create(null),u=0;u<i.length;++u){var h=i[u];if((o.disabled||!h.disabled)&&h.name&&t.test(h.nodeName)&&!e.test(h.type)){var d=h.name,m=h.value;if("checkbox"!==h.type&&"radio"!==h.type||h.checked||(m=void 0),o.empty){if("checkbox"!==h.type||h.checked||(m=""),"radio"===h.type&&(c[h.name]||h.checked?h.checked&&(c[h.name]=!0):c[h.name]=!1),null==m&&"radio"==h.type)continue}else if(!m)continue;if("select-multiple"!==h.type)r=l(r,d,m);else{m=[];for(var f=h.options,p=!1,g=0;g<f.length;++g){var v=f[g],y=o.empty&&!v.value,x=v.value||y;v.selected&&x&&(p=!0,r=o.hash&&"[]"!==d.slice(d.length-2)?l(r,d+"[]",v.value):l(r,d,v.value))}!p&&o.empty&&(r=l(r,d,""))}}}if(o.empty)for(var d in c)c[d]||(r=l(r,d,""));return r}(document.querySelector(".login-form"),{hash:!0,empty:!0});console.log(n),console.log(r.defaults.baseURL),r({url:"v1_0/authorizations",method:"POST",data:n}).then((e=>{console.log(e),l("Login Success!",1),localStorage.setItem("token",e.data.token),setTimeout((()=>{location.href="../content/index.html"}),1500)})).catch((e=>{console.log(e),l("Login Failed!",0)}))}))})();