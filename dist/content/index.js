(()=>{"use strict";axios.defaults.baseURL="https://geek.itheima.net/",axios.interceptors.request.use((function(e){const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(function(e){return Promise.reject(e)})),axios.interceptors.response.use((function(e){return e.data}),(function(e){return 401==e?.response?.status&&(alert("Login expired,Please login again!"),localStorage.clear(),location.href="../login/index.html"),Promise.reject(e)}));const e=axios;async function t(t="",n="",s="1",a="4"){try{const o=await e({url:"/v1_0/mp/articles",method:"GET",params:{status:t,channel_id:n,page:s,per_page:a}});console.log(o.data.results);const l=document.querySelector(".art-list");console.log("artList == null"+(null==l));const c=o.data.results.map((e=>`\n        <tr>\n          <td>\n            <img src="${1===e.cover.type?e.cover.images[0]:""}" alt="">\n          </td>\n          <td>${e.title}</td>\n          <td>\n            ${"1"===e.status?'<span class="badge text-bg-success">审核通过</span>':'<span class="badge text-bg-primary">待审核</span>'}\n          </td>\n          <td>\n            <span>${e.pubdate||"2023-04-27 10:59:34"}</span>\n          </td>\n          <td>\n            <span>${e.read_count||0}</span>\n          </td>\n          <td>\n            <span>${e.like_count||0}</span>\n          </td>\n          <td>\n            <span>${e.comment_count||0}</span>\n          </td>\n          <td>\n            <i class="bi bi-pencil-square edit"></i>\n            <i class="bi bi-trash3 del"></i>\n          </td>\n        </tr>`)).join("");console.log(c),document.querySelector(".art-list").innerHTML=c,console.log(document.querySelector(".art-list").innerHTML)}catch(e){console.log(e),console.log("request failed!",1)}}localStorage.getItem("token")||(location.href="../login/index.html"),e({url:"/v1_0/user/profile"}).then((e=>{document.querySelector(".nick-name")&&console.log(e.data)})),t(),document.querySelector(".sel-btn").addEventListener("click",(async()=>{status=document.querySelector('input[name="status"]:checked').value,channel=document.querySelector('select[name="channel_id"]').value,channel="请选择文章频道"==channel?"":channel,console.log(status),console.log(channel),t(status,channel)}))})();